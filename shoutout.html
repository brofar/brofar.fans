<html>

<head>
    <title>Streamer.bot Shout out player</title>

    <script>
        // Source code from: https://www.vrflad.com/shoutouthd.html

        function showVideo() {
            const urlParams = new URLSearchParams(window.location.search);
            const video = urlParams.get('video');
            const thumbnailUrl = urlParams.get('thumbnail_url');

            // Get the video source from the thumbnail url
            const videoSrc = thumbnailUrl.replace(/(.*)-preview-.*/, '$1.mp4');

            const videoElement = document.getElementById('videoplayer');
            videoElement.src = videoSrc;

        }

        function shoutout() {
            let firstrun = true;

            // parse url params
            const urlParams = new URLSearchParams(window.location.search);
            const user = urlParams.get('user');
            const image = urlParams.get('image');
            const video = urlParams.get('video');
            const time = urlParams.get('time');
            const thumbnailUrl = urlParams.get('thumbnail_url');

            // show avatar for a sec then show video
            // document.getElementById('imagebox2').innerHTML = "<img src='" + image + "' style='width:100%'/>";
            // setTimeout('showVideo()', 1000);
            
            showVideo();
        }
        function cleanup() {
            document.getElementById('videocontainer').innerHTML = "";
            document.getElementById('imagebox2').innerHTML = "";
        }
    </script>
</head>

<body onload="shoutout();">
    <div id="videocontainer" style="position:absolute; left: 0px; top: 0px; width: 100%;z-index:10" ; text-align: center>
        <video id='videoplayer' style="width:100%" autoplay onended="setTimeout('cleanup()',500);"></video>
    </div>
    <div id="imagebox2" style="position:absolute; height: 66%; width: 37.5%;  text-align: center; z-index: 1; left:50%; top:50%; transform: translate(-50%, -50%);">
    </div>
</body>

</html>
